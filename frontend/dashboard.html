<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard - Organismo Energético</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <style>
        body { margin: 0; background: #131b21; color: #f0f0f0; font-family: 'Segoe UI', 'Arial', sans-serif;}
        #container { display: flex; height: 100vh;}
        #sidebar { width: 350px; background: #17212b; padding: 1.5em 1em 1em 2em; box-shadow: 2px 0 16px #1118;}
        #sidebar h2 { margin: 0 0 1em 0; color: #ffe466;}
        #sidebar button { margin: 0.3em 0; background: #ffd900; border: none; padding: 0.6em 1em; border-radius: 1em; color: #000; font-weight: 600; cursor: pointer;}
        #sidebar button:hover { background: #ffef80;}
        #infoCelula {margin-top: 1em; background: #1d232a; border-radius: 1em; padding: 1em;}
        #stats { margin-top: 2em; font-size: 1.1em; color: #ffe466;}
        #energyCanvas { flex: 1; background: #0e161c; width: 100%; height: 100vh;}
        .modal { position: fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.45); display:none; z-index:99; align-items:center; justify-content:center;}
        .modal-content { background:#202c39; padding:2em; border-radius:1.5em; min-width:340px; box-shadow:0 4px 32px #000b; position:relative; }
        .close { position:absolute; right:18px; top:18px; cursor:pointer; font-size:2em; color:#fff; }
        .selected { outline: 3px solid #0af !important; }
        #tablaCrudContainer { margin-top: 1em; }
        table { border-collapse: collapse; width: 99%; margin-bottom: 2em; background: #19222b;}
        th, td { border: 1px solid #333b; padding: 0.5em 1em; }
        th { background: #282f39; color: #ffd900;}
        tr:nth-child(even) { background: #151b23; }
        tr:hover { background: #2d3742; }
        button { margin-right: 0.5em; }
        label { color: #ffe466; }
        input, select { background: #232c39; color: #ffe466; border: 1px solid #ffd900; border-radius: 6px; padding: 0.4em 0.7em; margin-bottom: 1em; }
    </style>
</head>
<body>
    <div id="container">
        <div id="sidebar">
            <h2>Organismo Energético ⚡️</h2>
            <button onclick="evolucionar()">Evolucionar Ciclo</button>
            <button onclick="exportarJSON()">Exportar JSON</button>
            <hr>
            <div id="stats">
                <!-- Aquí puedes mostrar estadísticas generales -->
            </div>
            <hr>
            <div id="tablasCrud">
                <h3>Gestión de entidades</h3>
                <ul style="padding-left: 0;">
                    <li><a href="#" onclick="mostrarTablaCrud('celulas')">Células</a></li>
                    <li><a href="#" onclick="mostrarTablaCrud('organulos')">Orgánulos</a></li>
                    <li><a href="#" onclick="mostrarTablaCrud('generadores')">Generadores</a></li>
                    <li><a href="#" onclick="mostrarTablaCrud('conexiones')">Conexiones</a></li>
                </ul>
                <div id="tablaCrudContainer"></div>
            </div>
        </div>
        <canvas id="canvas" width="1400" height="900"></canvas>
    </div>

    <!-- MODAL universal para CRUD (celula/orgánulo/generador/conexión) -->
    <div id="crudModal" class="modal">
        <div class="modal-content">
            <span id="closeCrud" class="close">&times;</span>
            <h2 id="crudTitle"></h2>
            <form id="crudForm"></form>
            <button type="submit" id="crudSubmit">Guardar</button>
        </div>
    </div>

    <script src="dashboard_crud.js"></script>
    <script src="app.js"></script>
</body>
</html>
